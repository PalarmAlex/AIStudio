<Window x:Class="AIStudio.Dialogs.ReflexChainBindingDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:converters="clr-namespace:AIStudio.Converters"
        mc:Ignorable="d" 
        Title="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÐ°Ð¼Ð¸ Ñ€ÐµÑ„Ð»ÐµÐºÑÐ¾Ð²" 
        Height="700" 
        Width="1100"
        WindowStartupLocation="CenterOwner"
        MinHeight="600" MinWidth="900"
        WindowState="Maximized">

  <Window.Resources>
    <converters:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
    <converters:Level1ToTextConverter x:Key="Level1ToTextConverter"/>
    <converters:IdListToNamesConverter x:Key="IdListToNamesConverter"/>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>

    <!-- Ð¡Ñ‚Ð¸Ð»Ð¸ Ð´Ð»Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ† -->
    <Style x:Key="DataGridBaseStyle" TargetType="DataGrid">
      <Setter Property="Background" Value="White"/>
      <Setter Property="RowBackground" Value="#FFF9F9F9"/>
      <Setter Property="AlternatingRowBackground" Value="#FFF0F0F0"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="GridLinesVisibility" Value="None"/>
      <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
      <Setter Property="HorizontalScrollBarVisibility" Value="Auto"/>
      <Setter Property="SelectionUnit" Value="FullRow"/>
      <Setter Property="CanUserAddRows" Value="False"/>
      <Setter Property="CanUserDeleteRows" Value="False"/>
      <Setter Property="AutoGenerateColumns" Value="False"/>
      <Setter Property="IsReadOnly" Value="True"/>
    </Style>

    <Style x:Key="HighlightedRowStyle" TargetType="DataGridRow">
      <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
          <Setter Property="Background" Value="#FFE3F2FD"/>
          <Setter Property="BorderBrush" Value="#FF2196F3"/>
          <Setter Property="BorderThickness" Value="1"/>
        </Trigger>
      </Style.Triggers>
    </Style>

    <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
      <Setter Property="FontSize" Value="14"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
      <Setter Property="Foreground" Value="#FF333333"/>
    </Style>

    <Style x:Key="FilterLabelStyle" TargetType="TextBlock">
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="VerticalAlignment" Value="Center"/>
      <Setter Property="Margin" Value="0,0,5,0"/>
    </Style>

    <!-- Ð¡Ñ‚Ð¸Ð»ÑŒ Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ -->
    <Style x:Key="ActionButtonStyle" TargetType="Button">
      <Setter Property="Width" Value="140"/>
      <Setter Property="Height" Value="32"/>
      <Setter Property="Margin" Value="0,0,10,0"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
      <Setter Property="Cursor" Value="Hand"/>
    </Style>

  </Window.Resources>

  <Grid Margin="10">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¸ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ñ€ÐµÑ„Ð»ÐµÐºÑÐµ -->
    <Border Grid.Row="0" 
            Background="#FF2196F3" 
            CornerRadius="4"
            Margin="0,0,0,10"
            Padding="12">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Column="0"
                   Text="Ð£ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð• Ð¦Ð•ÐŸÐžÐ§ÐšÐÐœÐ˜ Ð Ð•Ð¤Ð›Ð•ÐšÐ¡ÐžÐ’" 
                   FontSize="20"
                   FontWeight="Bold"
                   HorizontalAlignment="Left"
                   Foreground="White"/>

        <TextBlock Grid.Column="1"
                   Text="{Binding ReflexInfo}"
                   FontSize="14"
                   FontWeight="SemiBold"
                   HorizontalAlignment="Right"
                   Foreground="White"
                   VerticalAlignment="Center"/>
      </Grid>
    </Border>

    <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² Ð´Ð»Ñ Ñ†ÐµÐ¿Ð¾Ñ‡ÐµÐº -->
    <Border Grid.Row="1" 
            BorderBrush="#FFBBDEFB" 
            BorderThickness="1"
            CornerRadius="4"
            Margin="0,0,0,10"
            Padding="10"
            Background="#FFE3F2FD">
      <StackPanel>
        <TextBlock Text="Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ñ†ÐµÐ¿Ð¾Ñ‡ÐµÐº:" 
                   Style="{StaticResource HeaderTextStyle}"
                   Foreground="#FF0D47A1"
                   Margin="0,0,0,8"/>

        <StackPanel Orientation="Horizontal">
          <!-- Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ ID -->
          <StackPanel Orientation="Vertical" Margin="0,0,15,0" Width="120">
            <TextBlock Text="ID" Style="{StaticResource FilterLabelStyle}"/>
            <TextBox Text="{Binding ChainIdFilter, UpdateSourceTrigger=PropertyChanged, Delay=300}"
             Height="25"
             FontSize="12"
             BorderBrush="#FF90CAF9"
             Padding="4"
             ToolTip="ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð½Ñ‹Ð¹ Ð¿Ð¾Ð¸ÑÐº Ð¿Ð¾ Ñ‡Ð°ÑÑ‚Ð¸ ID"/>
          </StackPanel>

          <!-- Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ -->
          <StackPanel Orientation="Vertical" Margin="0,0,15,0" Width="200">
            <TextBlock Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ" Style="{StaticResource FilterLabelStyle}"/>
            <TextBox Text="{Binding ChainNameFilter, UpdateSourceTrigger=PropertyChanged, Delay=300}"
                 Height="25"
                 FontSize="12"
                 BorderBrush="#FF90CAF9"
                 Padding="4"
                 ToolTip="ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð½Ñ‹Ð¹ Ð¿Ð¾Ð¸ÑÐº Ð¿Ð¾ Ñ‡Ð°ÑÑ‚Ð¸ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ"/>
          </StackPanel>

          <!-- Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ð½Ð°Ð»Ð¸Ñ‡Ð¸ÑŽ Ð¿Ñ€Ð¸Ð²ÑÐ·ÐºÐ¸ -->
          <StackPanel Orientation="Vertical" Margin="0,0,15,0" Width="150">
            <TextBlock Text="ÐŸÑ€Ð¸Ð²ÑÐ·ÐºÐ°" Style="{StaticResource FilterLabelStyle}"/>
            <ComboBox ItemsSource="{Binding BindingFilterOptions}"
                  SelectedValue="{Binding SelectedBindingFilter}"
                  DisplayMemberPath="Value"
                  SelectedValuePath="Key"
                  Height="25"
                  FontSize="12"/>
          </StackPanel>

          <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° ÑÐ±Ñ€Ð¾ÑÐ° Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² -->
          <Button Content="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹" 
            Command="{Binding ClearFiltersCommand}"
            Width="120"
            Height="30"
            Margin="20,5,0,0"
            Background="#FFF5F5F5"
            BorderBrush="#FF9E9E9E"
            Foreground="#FF333333"
            FontSize="12"/>
        </StackPanel>

      </StackPanel>
    </Border>

    <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ†ÐµÐ¿Ð¾Ñ‡ÐµÐº -->
    <Grid Grid.Row="2" Margin="0,0,0,10">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>

      <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÑÐ¿Ð¸ÑÐºÐ° Ñ†ÐµÐ¿Ð¾Ñ‡ÐµÐº -->
      <Border Grid.Row="0" 
              Background="#FFE8EAF6" 
              BorderBrush="#FFC5CAE9" 
              BorderThickness="1,1,1,0"
              CornerRadius="4,4,0,0"
              Padding="10">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>

          <TextBlock Grid.Column="0"
                     Text="Ð¦Ð•ÐŸÐžÐ§ÐšÐ˜ Ð Ð•Ð¤Ð›Ð•ÐšÐ¡ÐžÐ’" 
                     FontWeight="Bold"
                     FontSize="16"
                     Foreground="#FF3F51B5"/>

          <TextBlock Grid.Column="1"
                     Text="{Binding ChainsInfo}"
                     FontSize="12"
                     FontStyle="Italic"
                     HorizontalAlignment="Right"
                     Foreground="#FF666666"
                     Margin="0,0,10,0"/>

          <TextBlock Grid.Column="2"
                     Text="{Binding ChainsCount, StringFormat='Ð’ÑÐµÐ³Ð¾: {0}'}"
                     FontSize="13"
                     FontWeight="SemiBold"
                     Foreground="#FF2196F3"/>
        </Grid>
      </Border>

      <!-- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ñ†ÐµÐ¿Ð¾Ñ‡ÐµÐº -->
      <Border Grid.Row="1" 
              BorderBrush="#FFC5CAE9" 
              BorderThickness="1,0,1,1"
              CornerRadius="0,0,4,4">
        <DataGrid x:Name="ChainsDataGrid"
                  ItemsSource="{Binding FilteredChains}"
                  SelectedItem="{Binding SelectedChain, Mode=TwoWay}"
                  Style="{StaticResource DataGridBaseStyle}"
                  SelectionMode="Single"
                  RowStyle="{StaticResource HighlightedRowStyle}"
                  SelectionChanged="ChainsDataGrid_SelectionChanged">

          <DataGrid.Columns>
            <DataGridTextColumn Header="ID" Binding="{Binding ID}" Width="60">
              <DataGridTextColumn.HeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                  <Setter Property="FontWeight" Value="SemiBold"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.HeaderStyle>
              <DataGridTextColumn.ElementStyle>
                <Style TargetType="TextBlock">
                  <Setter Property="HorizontalAlignment" Value="Center"/>
                  <Setter Property="Padding" Value="4,2"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.ElementStyle>
            </DataGridTextColumn>

            <DataGridTextColumn Header="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ" Binding="{Binding Name}" Width="200">
              <DataGridTextColumn.HeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                  <Setter Property="FontWeight" Value="SemiBold"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.HeaderStyle>
              <DataGridTextColumn.ElementStyle>
                <Style TargetType="TextBlock">
                  <Setter Property="Padding" Value="4,2"/>
                  <Setter Property="TextWrapping" Value="Wrap"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.ElementStyle>
            </DataGridTextColumn>

            <DataGridTextColumn Header="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ" Binding="{Binding Description}" Width="*">
              <DataGridTextColumn.HeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                  <Setter Property="FontWeight" Value="SemiBold"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.HeaderStyle>
              <DataGridTextColumn.ElementStyle>
                <Style TargetType="TextBlock">
                  <Setter Property="Padding" Value="4,2"/>
                  <Setter Property="TextWrapping" Value="Wrap"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.ElementStyle>
            </DataGridTextColumn>

            <DataGridTextColumn Header="Ð—Ð²ÐµÐ½ÑŒÐµÐ²" Binding="{Binding Links.Count}" Width="70">
              <DataGridTextColumn.HeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                  <Setter Property="FontWeight" Value="SemiBold"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.HeaderStyle>
              <DataGridTextColumn.ElementStyle>
                <Style TargetType="TextBlock">
                  <Setter Property="HorizontalAlignment" Value="Center"/>
                  <Setter Property="Padding" Value="4,2"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.ElementStyle>
            </DataGridTextColumn>

          </DataGrid.Columns>
        </DataGrid>
      </Border>
    </Grid>

    <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð²ÐµÐ½ÑŒÐµÐ² Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¹ Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÐ¸ -->
    <Grid Grid.Row="3" Margin="0,0,0,10">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>

      <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÑÐ¿Ð¸ÑÐºÐ° Ð·Ð²ÐµÐ½ÑŒÐµÐ² -->
      <Border Grid.Row="0" 
              Background="#FFE8F5E8" 
              BorderBrush="#FFC8E6C9" 
              BorderThickness="1,1,1,0"
              CornerRadius="4,4,0,0"
              Padding="10">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>

          <TextBlock Grid.Column="0"
                     Text="Ð—Ð’Ð•ÐÐ¬Ð¯ Ð’Ð«Ð‘Ð ÐÐÐÐžÐ™ Ð¦Ð•ÐŸÐžÐ§ÐšÐ˜" 
                     FontWeight="Bold"
                     FontSize="16"
                     Foreground="#FF4CAF50"/>

          <TextBlock Grid.Column="1"
                     Text="{Binding SelectedChainInfo}"
                     FontSize="12"
                     FontStyle="Italic"
                     HorizontalAlignment="Right"
                     Foreground="#FF666666"
                     Margin="0,0,10,0"/>

          <TextBlock Grid.Column="2"
                     Text="{Binding LinksCount, StringFormat='Ð—Ð²ÐµÐ½ÑŒÐµÐ²: {0}'}"
                     FontSize="13"
                     FontWeight="SemiBold"
                     Foreground="#FF4CAF50"/>
        </Grid>
      </Border>

      <!-- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð·Ð²ÐµÐ½ÑŒÐµÐ² -->
      <Border Grid.Row="1" 
              BorderBrush="#FFC8E6C9" 
              BorderThickness="1,0,1,1"
              CornerRadius="0,0,4,4">
        <DataGrid x:Name="LinksDataGrid"
                  ItemsSource="{Binding SelectedChainLinks}"
                  Style="{StaticResource DataGridBaseStyle}"
                  SelectionMode="Single">

          <DataGrid.Columns>
            <DataGridTextColumn Header="ID" Binding="{Binding ID}" Width="60">
              <DataGridTextColumn.HeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                  <Setter Property="FontWeight" Value="SemiBold"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.HeaderStyle>
              <DataGridTextColumn.ElementStyle>
                <Style TargetType="TextBlock">
                  <Setter Property="HorizontalAlignment" Value="Center"/>
                  <Setter Property="Padding" Value="4,2"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.ElementStyle>
            </DataGridTextColumn>

            <DataGridTextColumn Header="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ" Binding="{Binding ActionId}" Width="80">
              <DataGridTextColumn.HeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                  <Setter Property="FontWeight" Value="SemiBold"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.HeaderStyle>
              <DataGridTextColumn.ElementStyle>
                <Style TargetType="TextBlock">
                  <Setter Property="HorizontalAlignment" Value="Center"/>
                  <Setter Property="Padding" Value="4,2"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.ElementStyle>
            </DataGridTextColumn>

            <DataGridTextColumn Header="Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰ÐµÐµ (ÑƒÑÐ¿ÐµÑ…)" Binding="{Binding SuccessNextLink}" Width="110">
              <DataGridTextColumn.HeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                  <Setter Property="FontWeight" Value="SemiBold"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.HeaderStyle>
              <DataGridTextColumn.ElementStyle>
                <Style TargetType="TextBlock">
                  <Setter Property="HorizontalAlignment" Value="Center"/>
                  <Setter Property="Padding" Value="4,2"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.ElementStyle>
            </DataGridTextColumn>

            <DataGridTextColumn Header="Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰ÐµÐµ (Ð½ÐµÑƒÐ´Ð°Ñ‡Ð°)" Binding="{Binding FailureNextLink}" Width="110">
              <DataGridTextColumn.HeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                  <Setter Property="FontWeight" Value="SemiBold"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.HeaderStyle>
              <DataGridTextColumn.ElementStyle>
                <Style TargetType="TextBlock">
                  <Setter Property="HorizontalAlignment" Value="Center"/>
                  <Setter Property="Padding" Value="4,2"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.ElementStyle>
            </DataGridTextColumn>

            <DataGridTextColumn Header="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ" Binding="{Binding Description}" Width="*">
              <DataGridTextColumn.HeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                  <Setter Property="FontWeight" Value="SemiBold"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.HeaderStyle>
              <DataGridTextColumn.ElementStyle>
                <Style TargetType="TextBlock">
                  <Setter Property="Padding" Value="4,2"/>
                  <Setter Property="TextWrapping" Value="Wrap"/>
                  <Setter Property="FontSize" Value="12"/>
                </Style>
              </DataGridTextColumn.ElementStyle>
            </DataGridTextColumn>
          </DataGrid.Columns>
        </DataGrid>
      </Border>
    </Grid>

    <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
    <Border Grid.Row="4" 
            BorderBrush="#FFFFF3E0" 
            BorderThickness="1"
            CornerRadius="4"
            Padding="12"
            Background="#FFFFF8E1">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð²Ñ‹Ð±Ð¾Ñ€Ðµ -->
        <StackPanel Grid.Column="0" Orientation="Vertical" VerticalAlignment="Center">
          <TextBlock Text="{Binding SelectionInfo}"
                     FontSize="13"
                     FontStyle="Italic"
                     Foreground="#FF333333"/>

          <TextBlock Text="{Binding CurrentBindingInfo}"
           FontSize="13"
           FontStyle="Italic"
           Foreground="#FF4CAF50"
           Margin="0,3,0,0"
           Visibility="{Binding HasCurrentBinding, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        </StackPanel>

        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ -->
        <Button Grid.Column="1"
                Content="âœï¸ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ" 
                Click="EditChainButton_Click"
                Style="{StaticResource ActionButtonStyle}"
                ToolTip="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¹ Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÐ¸"
                Background="#FFFF9800"
                BorderBrush="#FFF57C00"
                Foreground="White"
                IsEnabled="{Binding IsChainSelected}"/>

        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ -->
        <Button Grid.Column="2"
                Content="ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" 
                Click="DeleteChainButton_Click"
                Style="{StaticResource ActionButtonStyle}"
                ToolTip="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½ÑƒÑŽ Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÑƒ Ð¸ Ð²ÑÐµ ÐµÐµ Ð·Ð²ÐµÐ½ÑŒÑ"
                Background="#FFF44336"
                BorderBrush="#FFD32F2F"
                Foreground="White"
                Margin="0,0,15,0"
                IsEnabled="{Binding IsChainSelected}"/>

        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿Ñ€Ð¸Ð²ÑÐ·ÐºÐ¸ -->
        <Button Grid.Column="3"
                Content="ðŸ”— ÐŸÑ€Ð¸Ð²ÑÐ·Ð°Ñ‚ÑŒ" 
                Click="BindChainButton_Click"
                Style="{StaticResource ActionButtonStyle}"
                ToolTip="ÐŸÑ€Ð¸Ð²ÑÐ·Ð°Ñ‚ÑŒ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½ÑƒÑŽ Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÑƒ Ðº Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¼Ñƒ Ñ€ÐµÑ„Ð»ÐµÐºÑÑƒ"
                Background="#FF4CAF50"
                BorderBrush="#FF388E3C"
                Foreground="White"
                Margin="0,0,15,0"
                IsEnabled="{Binding IsChainSelected}"/>

        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¾Ñ‚Ð¼ÐµÐ½Ñ‹ -->
        <Button Grid.Column="4"
                Content="âŒ Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ" 
                Click="CloseButton_Click"
                Width="100"
                Height="32"
                Background="#FFF5F5F5"
                BorderBrush="#FF9E9E9E"
                Foreground="#FF333333"
                FontSize="13"
                Cursor="Hand"/>
      </Grid>
    </Border>
  </Grid>
</Window>