<Window x:Class="AIStudio.Dialogs.InfluenceActionsSelectionDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Выбор внешних воздействий" Height="500" Width="600"
        WindowStartupLocation="CenterOwner"
        PreviewKeyDown="Window_PreviewKeyDown">

  <Grid Margin="10">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <TextBlock Grid.Row="0" Text="Выберите внешние воздействия:" Margin="0,0,0,10" FontWeight="Bold"/>

    <ListView x:Name="InfluenceActionsList" Grid.Row="1" SelectionMode="Multiple">
      <ListView.ItemTemplate>
        <DataTemplate>
          <CheckBox Content="{Binding Name}" 
                 IsChecked="{Binding IsSelected}"
                 IsEnabled="{Binding IsEnabled}"
                 ToolTip="{Binding Description}" 
                 Checked="CheckBox_Checked"
                 Unchecked="CheckBox_Unchecked"
                 Margin="2"/>
        </DataTemplate>
      </ListView.ItemTemplate>
    </ListView>

    <!-- Сообщение о конфликтах -->
    <Border Grid.Row="2" Background="#FFF0F0F0" BorderBrush="#FFCCCCCC" BorderThickness="1" 
            Margin="0,10,0,5" Padding="5" Visibility="{Binding ConflictMessageVisibility}">
      <TextBlock x:Name="ConflictMessage" TextWrapping="Wrap" Foreground="Red"/>
    </Border>

    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
      <Button Content="OK" Width="80" Margin="0,0,10,0" Click="OkButton_Click"/>
      <Button Content="Отмена" Width="80" Click="CancelButton_Click"/>
    </StackPanel>
  </Grid>
</Window>