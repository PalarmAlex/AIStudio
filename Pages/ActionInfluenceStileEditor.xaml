<Window x:Class="AIStudio.Dialogs.ActionInfluenceStileEditor"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ActionInfluenceEditor" Height="400" Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        PreviewKeyDown="Window_PreviewKeyDown">
  
  <Grid Margin="10">
    <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <DataGrid ItemsSource="{Binding ActionItems}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  Grid.Row="0">
      <DataGrid.Columns>
        <DataGridTextColumn Header="ID действия" 
                                  Binding="{Binding ActionId}" 
                                  Width="80" IsReadOnly="True"/>
        <DataGridTextColumn Header="Наименование действия" 
                                  Binding="{Binding ActionName}" 
                                  Width="*" IsReadOnly="True"/>
        <DataGridTextColumn Header="Влияние (-5..+5)" 
                                  Binding="{Binding Influence}" 
                                  Width="100">
          <DataGridTextColumn.ElementStyle>
            <Style TargetType="TextBlock">
              <Setter Property="TextAlignment" Value="Center"/>
            </Style>
          </DataGridTextColumn.ElementStyle>
          <DataGridTextColumn.EditingElementStyle>
            <Style TargetType="TextBox">
              <Setter Property="TextAlignment" Value="Center"/>
              <EventSetter Event="PreviewTextInput" Handler="InfluenceTextBox_PreviewTextInput"/>
              <EventSetter Event="LostFocus" Handler="InfluenceTextBox_LostFocus"/>
              <EventSetter Event="PreviewKeyDown" Handler="InfluenceTextBox_PreviewKeyDown"/>
            </Style>
          </DataGridTextColumn.EditingElementStyle>
        </DataGridTextColumn>
      </DataGrid.Columns>
    </DataGrid>

    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
      <Button Content="OK" Width="80" Margin="0,0,10,0" Click="OkButton_Click"/>
      <Button Content="Отмена" Width="80" Click="CancelButton_Click"/>
    </StackPanel>
  </Grid>
</Window>