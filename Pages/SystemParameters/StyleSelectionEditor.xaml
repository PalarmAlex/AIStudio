<Window x:Class="AIStudio.Dialogs.StyleSelectionEditor"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="{Binding Title}" 
        Width="500" Height="600"
        WindowStartupLocation="CenterOwner"
        PreviewKeyDown="Window_PreviewKeyDown">

  <Grid Margin="10">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- Заголовок и описание -->
    <TextBlock Grid.Row="0" TextWrapping="Wrap" Margin="0,0,0,10"
               Text="Выберите стили поведения. Конфликтующие стили будут автоматически заблокированы."/>

    <!-- Список стилей -->
    <ListBox x:Name="StylesListBox" Grid.Row="1" SelectionMode="Multiple">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <CheckBox Content="{Binding DisplayText}" 
                    IsChecked="{Binding IsSelected}"
                    IsEnabled="{Binding IsEnabled}"
                    ToolTip="{Binding Description}"
                    Checked="CheckBox_Checked"
                    Unchecked="CheckBox_Unchecked"/>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <!-- Сообщение о конфликтах -->
    <TextBlock x:Name="ConflictMessage" Grid.Row="2" 
               Foreground="Red" Margin="0,10,0,5" TextWrapping="Wrap"
               Visibility="Collapsed"/>

    <!-- Кнопки -->
    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
      <Button Content="Сохранить" Width="80" Margin="0,0,10,0" Click="SaveButton_Click"/>
      <Button Content="Отмена" Width="80" Click="CancelButton_Click"/>
    </StackPanel>
  </Grid>
</Window>